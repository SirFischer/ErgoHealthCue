<Window x:Class="ErgoHealthCue.Windows.StatisticsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ErgoHealthCue.Windows"
        Title="Progress &amp; Statistics" 
        Height="600" Width="900"
        WindowStartupLocation="CenterOwner"
        Background="#F9FAFB">
    
    <Window.Resources>
        <local:StatusConverter x:Key="StatusConverter"/>
        
        <Style x:Key="ModernGroupBox" TargetType="GroupBox">
            <Setter Property="BorderBrush" Value="#E5E7EB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GroupBox">
                        <Border Background="{TemplateBinding Background}"
                               BorderBrush="{TemplateBinding BorderBrush}"
                               BorderThickness="{TemplateBinding BorderThickness}"
                               CornerRadius="12"
                               Padding="{TemplateBinding Padding}">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.05" Color="Black"/>
                            </Border.Effect>
                            <StackPanel>
                                <TextBlock Text="{TemplateBinding Header}"
                                         FontSize="18"
                                         FontWeight="SemiBold"
                                         Foreground="#1F2937"
                                         Margin="0,0,0,15"/>
                                <ContentPresenter/>
                            </StackPanel>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="StatCard" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E5E7EB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="20"/>
        </Style>
    </Window.Resources>
    
    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Progress &amp; Statistics" FontSize="32" FontWeight="Bold" Foreground="#111827"/>
            <TextBlock Text="View your level, XP, and ergonomic activity history" 
                      FontSize="14" Foreground="#6B7280" Margin="0,5,0,0"/>
        </StackPanel>
        
        <!-- Time Period Filter -->
        <Border Grid.Row="1" 
               Background="White" 
               BorderBrush="#E5E7EB" 
               BorderThickness="1" 
               CornerRadius="12" 
               Padding="20"
               Margin="0,0,0,20">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.05" Color="Black"/>
            </Border.Effect>
            <StackPanel>
                <TextBlock Text="Time Period" 
                          FontSize="14" 
                          FontWeight="Medium"
                          Foreground="#6B7280" 
                          Margin="0,0,0,10"/>
                <StackPanel Orientation="Horizontal">
                    <RadioButton x:Name="TodayRadio" 
                                Content="Today" 
                                GroupName="TimePeriod"
                                FontSize="14"
                                Margin="0,0,15,0"
                                Checked="TimePeriodRadio_Checked"/>
                    <RadioButton x:Name="WeekRadio" 
                                Content="This Week" 
                                GroupName="TimePeriod"
                                FontSize="14"
                                Margin="0,0,15,0"
                                Checked="TimePeriodRadio_Checked"/>
                    <RadioButton x:Name="MonthRadio" 
                                Content="This Month" 
                                GroupName="TimePeriod"
                                FontSize="14"
                                Margin="0,0,15,0"
                                Checked="TimePeriodRadio_Checked"/>
                    <RadioButton x:Name="YearRadio" 
                                Content="This Year" 
                                GroupName="TimePeriod"
                                FontSize="14"
                                Margin="0,0,15,0"
                                Checked="TimePeriodRadio_Checked"/>
                    <RadioButton x:Name="AllTimeRadio" 
                                Content="All Time" 
                                GroupName="TimePeriod"
                                FontSize="14"
                                IsChecked="True"
                                Checked="TimePeriodRadio_Checked"/>
                </StackPanel>
            </StackPanel>
        </Border>
        
        <!-- Summary Cards -->
        <Grid Grid.Row="2" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="15"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="15"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="15"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="15"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Style="{StaticResource StatCard}">
                <StackPanel>
                    <TextBlock Text="Level" 
                              FontSize="14" 
                              FontWeight="Medium"
                              Foreground="#6B7280"
                              HorizontalAlignment="Center"/>
                    <TextBlock x:Name="LevelText" 
                              Text="1" 
                              FontSize="36" 
                              FontWeight="Bold"
                              Foreground="#F59E0B"
                              HorizontalAlignment="Center" 
                              Margin="0,8,0,0"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="2" Style="{StaticResource StatCard}">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.05" Color="#8B5CF6"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Progress" 
                              FontSize="14" 
                              FontWeight="Medium"
                              Foreground="#6B7280"
                              HorizontalAlignment="Center"/>
                    <TextBlock x:Name="ProgressText" 
                              Text="0%" 
                              FontSize="36" 
                              FontWeight="Bold"
                              Foreground="#8B5CF6"
                              HorizontalAlignment="Center" 
                              Margin="0,8,0,0"/>
                    <TextBlock x:Name="XPText" 
                              Text="0 / 100 XP" 
                              FontSize="12" 
                              Foreground="#9CA3AF"
                              HorizontalAlignment="Center" 
                              Margin="0,4,0,0"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="4" Style="{StaticResource StatCard}">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.05" Color="Black"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Total Cues" 
                              FontSize="14" 
                              FontWeight="Medium"
                              Foreground="#6B7280"
                              HorizontalAlignment="Center"/>
                    <TextBlock x:Name="TotalCuesText" 
                              Text="0" 
                              FontSize="36" 
                              FontWeight="Bold"
                              Foreground="#111827"
                              HorizontalAlignment="Center" 
                              Margin="0,8,0,0"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="6" Style="{StaticResource StatCard}">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.05" Color="#10B981"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Completed" 
                              FontSize="14" 
                              FontWeight="Medium"
                              Foreground="#6B7280"
                              HorizontalAlignment="Center"/>
                    <TextBlock x:Name="CompletedText" 
                              Text="0" 
                              FontSize="36" 
                              FontWeight="Bold"
                              Foreground="#10B981"
                              HorizontalAlignment="Center" 
                              Margin="0,8,0,0"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="8" Style="{StaticResource StatCard}">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.05" Color="#EF4444"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Dismissed" 
                              FontSize="14" 
                              FontWeight="Medium"
                              Foreground="#6B7280"
                              HorizontalAlignment="Center"/>
                    <TextBlock x:Name="DismissedText" 
                              Text="0" 
                              FontSize="36" 
                              FontWeight="Bold"
                              Foreground="#EF4444"
                              HorizontalAlignment="Center" 
                              Margin="0,8,0,0"/>
                </StackPanel>
            </Border>
        </Grid>
        
        <!-- History -->
        <GroupBox Grid.Row="3" Header="History" Style="{StaticResource ModernGroupBox}">
            <DataGrid x:Name="StatisticsDataGrid"
                     AutoGenerateColumns="False"
                     IsReadOnly="True"
                     SelectionMode="Single"
                     GridLinesVisibility="None"
                     HeadersVisibility="Column"
                     BorderThickness="0"
                     Background="Transparent"
                     RowBackground="White"
                     AlternatingRowBackground="#F9FAFB"
                     FontSize="14">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Date/Time" Binding="{Binding ShownAt, StringFormat='yyyy-MM-dd HH:mm'}" Width="140"/>
                    <DataGridTextColumn Header="Type" Binding="{Binding CueType}" Width="140"/>
                    <DataGridTextColumn Header="Title" Binding="{Binding CueTitle}" Width="180"/>
                    <DataGridTextColumn Header="Status" Binding="{Binding WasCompleted, Converter={StaticResource StatusConverter}}" Width="110"/>
                    <DataGridTextColumn Header="Response Time" Binding="{Binding ResponseTime}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>
        
        <!-- Buttons -->
        <StackPanel Grid.Row="4" 
                   Orientation="Horizontal"
                   HorizontalAlignment="Right"
                   Margin="0,20,0,0">
            <Button Content="Reset Statistics"
                   Width="140"
                   Height="44"
                   FontSize="15"
                   Margin="0,0,15,0"
                   Click="ResetStatisticsButton_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#EF4444"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                           CornerRadius="10"
                                           Padding="20,10">
                                        <ContentPresenter HorizontalAlignment="Center" 
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#DC2626"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
            
            <Button Content="Close"
                   Width="120"
                   Height="44"
                   FontSize="15"
                   Click="CloseButton_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background">
                            <Setter.Value>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#6366F1" Offset="0"/>
                                    <GradientStop Color="#4F46E5" Offset="1"/>
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                           CornerRadius="10"
                                           Padding="20,10">
                                        <Border.Effect>
                                            <DropShadowEffect BlurRadius="8" ShadowDepth="2" Opacity="0.2" Color="#6366F1"/>
                                        </Border.Effect>
                                        <ContentPresenter HorizontalAlignment="Center" 
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                            <GradientStop Color="#4F46E5" Offset="0"/>
                                            <GradientStop Color="#4338CA" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>
    </Grid>
</Window>
